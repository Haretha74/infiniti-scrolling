{"version":3,"sources":["app.js"],"names":["offset","count","getImage","url","fetch","then","response","json","data","sprites","front_default","getNewPokemons","res","template","document","getElementById","pokeList","querySelector","results","forEach","result","clone","content","cloneNode","name","img","innerText","imageURL","dataset","src","imageObserver","observe","appendChild","lastChiled","observer","IntersectionObserver","entries","intersectionRatio","unobserve","target","threshold"],"mappings":";;AAAI,IAAIA,MAAM,GAAG,CAAb;AACA,IAAIC,KAAJ;;AACA,SAASC,QAAT,CAAkBC,GAAlB,EAAuB;AACnB,SAAOC,KAAK,CAACD,GAAD,CAAL,CACNE,IADM,CACA,UAASC,QAAT,EAAmB;AACtB,WAAOA,QAAQ,CAACC,IAAT,EAAP;AAED,GAJI,EAKJF,IALI,CAKE,UAASG,IAAT,EAAe;AAClB,WAAOA,IAAI,CAACC,OAAL,CAAaC,aAApB;AACH,GAPI,CAAP;AAQH;;AACD,SAASC,cAAT,CAAwBX,MAAxB,EAAgC;AACpCI,EAAAA,KAAK,6DAAsDJ,MAAtD,EAAL,CACKK,IADL,CACU,UAAAO,GAAG;AAAA,WAAIA,GAAG,CAACL,IAAJ,EAAJ;AAAA,GADb,EAEKF,IAFL,CAEU,UAAAG,IAAI,EAAI;AACV,QAAIK,QAAQ,GAAGC,QAAQ,CAACC,cAAT,CAAwB,UAAxB,CAAf;AACA,QAAIC,QAAQ,GAAGF,QAAQ,CAACG,aAAT,CAAuB,WAAvB,CAAf;AACAhB,IAAAA,KAAK,GAAGO,IAAI,CAACP,KAAb;AAEAO,IAAAA,IAAI,CAACU,OAAL,CAAaC,OAAb,CAAqB,UAASC,MAAT,EAAiB;AAClC,UAAIC,KAAK,GAAGR,QAAQ,CAACS,OAAT,CAAiBC,SAAjB,CAA2B,IAA3B,CAAZ;AACA,UAAIC,IAAI,GAAGH,KAAK,CAACJ,aAAN,CAAoB,WAApB,CAAX;AACA,UAAIQ,GAAG,GAAGJ,KAAK,CAACJ,aAAN,CAAoB,UAApB,CAAV;AACAO,MAAAA,IAAI,CAACE,SAAL,GAAiBN,MAAM,CAACI,IAAxB;AAEAtB,MAAAA,QAAQ,CAACkB,MAAM,CAACjB,GAAR,CAAR,CACCE,IADD,CACM,UAASsB,QAAT,EAAmB;AACrBF,QAAAA,GAAG,CAACG,OAAJ,CAAYC,GAAZ,GAAkBF,QAAlB;AACAG,QAAAA,aAAa,CAACC,OAAd,CAAsBN,GAAtB;AAEH,OALD;AAOAT,MAAAA,QAAQ,CAACgB,WAAT,CAAqBX,KAArB;AACH,KAdD;AAeA,QAAIY,UAAU,GAAGnB,QAAQ,CAACG,aAAT,CAAuB,yBAAvB,CAAjB;AACAiB,IAAAA,QAAQ,CAACH,OAAT,CAAiBE,UAAjB;AACH,GAxBL;AAyBC;;AACD,IAAIC,QAAQ,GAAG,IAAIC,oBAAJ,CAAyB,UAASC,OAAT,EAAkB;AAEtD,MAAGA,OAAO,CAAC,CAAD,CAAP,CAAWC,iBAAX,IAAgC,CAAnC,EAAsC;AACtCH,EAAAA,QAAQ,CAACI,SAAT,CAAmBF,OAAO,CAAC,CAAD,CAAP,CAAWG,MAA9B;AACAvC,EAAAA,MAAM,GAAGA,MAAM,GAAG,EAAlB;AACA,MAAGA,MAAM,GAAGC,KAAZ,EAAmB;AACnBU,EAAAA,cAAc,CAACX,MAAD,CAAd;AACH,CAPc,EAOZ;AACCwC,EAAAA,SAAS,EAAE;AADZ,CAPY,CAAf;AAWA,IAAIV,aAAa,GAAG,IAAIK,oBAAJ,CAAyB,UAASC,OAAT,EAAkB;AAE3D,MAAGA,OAAO,CAAC,CAAD,CAAP,CAAWC,iBAAX,IAAgC,CAAnC,EAAsC;AACtCH,EAAAA,QAAQ,CAACI,SAAT,CAAmBF,OAAO,CAAC,CAAD,CAAP,CAAWG,MAA9B;AACAH,EAAAA,OAAO,CAAC,CAAD,CAAP,CAAWG,MAAX,CAAkBV,GAAlB,GAAwBO,OAAO,CAAC,CAAD,CAAP,CAAWG,MAAX,CAAkBX,OAAlB,CAA0BC,GAAlD;AAEH,CANmB,EAMjB;AACCW,EAAAA,SAAS,EAAE;AADZ,CANiB,CAApB;AASA7B,cAAc,CAACX,MAAD,CAAd","file":"app.js","sourcesContent":["    let offset = 0;\r\n    let count;\r\n    function getImage(url) {\r\n        return fetch(url)\r\n        .then (function(response) {\r\n            return response.json() ;\r\n\r\n          })\r\n          .then (function(data) {\r\n              return data.sprites.front_default;\r\n          });\r\n    }\r\n    function getNewPokemons(offset) {\r\nfetch(`https://pokeapi.co/api/v2/pokemon?limit=10&offset=${offset}`)\r\n    .then(res => res.json())\r\n    .then(data => {\r\n        var template = document.getElementById(\"template\");\r\n        var pokeList = document.querySelector(\".pokeList\");\r\n        count = data.count;\r\n\r\n        data.results.forEach(function(result) {\r\n            var clone = template.content.cloneNode(true);\r\n            var name = clone.querySelector(\".pokeName\");\r\n            var img = clone.querySelector('.pokeImg');\r\n            name.innerText = result.name;\r\n\r\n            getImage(result.url)\r\n            .then(function(imageURL) {\r\n                img.dataset.src = imageURL;\r\n                imageObserver.observe(img);\r\n\r\n            });\r\n            \r\n            pokeList.appendChild(clone);\r\n        });\r\n        var lastChiled = document.querySelector(\".pokeList li:last-child\");\r\n        observer.observe(lastChiled);\r\n    });\r\n}\r\nvar observer = new IntersectionObserver(function(entries) {\r\n\r\n    if(entries[0].intersectionRatio <= 0) return; \r\n    observer.unobserve(entries[0].target);\r\n    offset = offset + 10;\r\n    if(offset > count) return;\r\n    getNewPokemons(offset);\r\n}, {\r\n    threshold: 1\r\n});\r\n\r\nvar imageObserver = new IntersectionObserver(function(entries) {\r\n\r\n    if(entries[0].intersectionRatio <= 0) return; \r\n    observer.unobserve(entries[0].target);\r\n    entries[0].target.src = entries[0].target.dataset.src;\r\n    \r\n}, {\r\n    threshold: 1\r\n});\r\ngetNewPokemons(offset);\r\n    "]}